{"remainingRequest":"/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js!/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","dependencies":[{"path":"/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","mtime":1618663602943},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90b21hcy9EZXNrdG9wL2hlbGxvLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgY3JlZCBmcm9tICcuLi8uLi9jcmVkLmpzJzsKdmFyIHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgLyoqTG9naW4gbWV0aG9kCiAgICogCiAgICogQHBhcmFtIHsqfSBjb250ZXh0IAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHVybCwgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgZXhwaXJlc0luLCBleHBpcmF0aW9uRGF0ZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQuZGV2LnVybF9sb2dpbjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJywKICAgICAgICAgICAgICAgIC8vIG5vLWNvcnMsICpjb3JzLCBzYW1lLW9yaWdpbgogICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsCiAgICAgICAgICAgICAgICAvLyAqZGVmYXVsdCwgbm8tY2FjaGUsIHJlbG9hZCwgZm9yY2UtY2FjaGUsIG9ubHktaWYtY2FjaGVkCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUsICpzYW1lLW9yaWdpbiwgb21pdAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvcgogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZURhdGEuY29kZSA9PT0gNDAxKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIC8vIHF1aSB0dXR0byBvayAKICAgICAgICAgICAgICAvLyByZXNwb25zZURhdGEuZXhwaXJlc0luID0gMzYwMCAsLCwgw6ggaW4gc2Vjb25kaSBbKiAxMDAgcGVyIG90dGVuZXJlIG1pbGxpc2Vjb25kaV0KICAgICAgICAgICAgICBleHBpcmVzSW4gPSArcmVzcG9uc2VEYXRhLmV4cGlyZXNJbiAqIDEwMDA7IC8vICBjb25zdCBleHBpcmVzSW4gPSA1MDAwCiAgICAgICAgICAgICAgLy8gZ2V0cyB0aGUgdGltZSBpbiBtaWxsaXNlY29uZHMKCiAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIGV4cGlyZXNJbjsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZURhdGEudG9rZW4pOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCByZXNwb25zZURhdGEuZW1haWwpOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nLCBleHBpcmF0aW9uRGF0ZSk7IC8vIGRvcG8gcXVlc3RvIHRlbXBvICdleHBpcmVzSW4nLCBsYSBmdW56aW9uZSB2aWVuZSBlc2VndWl0YQogICAgICAgICAgICAgIC8vIFVuYSB2b2x0YSBsb2dvdXQsIHB1bGlzY28gaWwgdGltZXIgY29uIGNsZWFyVGltZW91dAoKICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgnYXV0b0xvZ091dCcpOwogICAgICAgICAgICAgIH0sIGV4cGlyZXNJbik7CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgICAgICAgICB0b2tlbjogcmVzcG9uc2VEYXRhLnRva2VuLAogICAgICAgICAgICAgICAgdXNlcklkOiByZXNwb25zZURhdGEuZW1haWwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogcmVnaXN0ZXIgbWV0aG9kCiAgICogQHBhcmFtIHsqfSBfIAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoXywgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciB1cmwsIHJlc3BvbnNlLCByZXNwb25zZURhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9yZWdpc3Rlcic7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgbW9kZTogJ2NvcnMnLAogICAgICAgICAgICAgICAgLy8gbm8tY29ycywgKmNvcnMsIHNhbWUtb3JpZ2luCiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJywKICAgICAgICAgICAgICAgIC8vICpkZWZhdWx0LCBuby1jYWNoZSwgcmVsb2FkLCBmb3JjZS1jYWNoZSwgb25seS1pZi1jYWNoZWQKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgLy8gaW5jbHVkZSwgKnNhbWUtb3JpZ2luLCBvbWl0CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIC8vICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvcgogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLAogICAgICAgICAgICAgICAgICBzdXJuYW1lOiBwYXlsb2FkLnN1cm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlRGF0YS5jb2RlID09PSA0MDkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogR2V0IGNhbGxzIGluIGV2ZXJ5IHBhZ2Ugcmlsb2FkCiAgICogQHBhcmFtIHsqfSBfIAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICB0cnlMb2dpbjogZnVuY3Rpb24gdHJ5TG9naW4oY29udGV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciB0b2tlbiwgdXNlcklkLCB0b2tlbkV4cGlyYXRpb24sIGV4cGlyZWRJbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICAgIHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgICAgICAgICAgICB0b2tlbkV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7IC8vIHByZW5kbyBsYSBkaWZmZXJlbnphIHBlciBjYXBpcmUgc2UgaWwgdG9rZW4gw6ggc2NhZHV0bwoKICAgICAgICAgICAgICBleHBpcmVkSW4gPSArdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgICAgICAgICAgIGlmICghKGV4cGlyZWRJbiA8IDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgnYXV0b0xvZ091dCcpOwogICAgICAgICAgICAgIH0sIGV4cGlyZWRJbik7CgogICAgICAgICAgICAgIGlmICh0b2tlbiAmJiB1c2VySWQpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBMb2dzIHRoZSB1c2VyIG91dAogICAqIEBwYXJhbSB7Kn0gY29udGV4dCAKICAgKi8KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsKICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgdG9rZW46IG51bGwsCiAgICAgIHVzZXJJZDogbnVsbAogICAgfSk7CiAgfSwKICBhdXRvTG9nT3V0OiBmdW5jdGlvbiBhdXRvTG9nT3V0KGNvbnRleHQpIHsKICAgIC8vIGNoaWFtYSBpbCBtZXRvZG8gcXVpIHNvcHJhICdsb2dvdXQKICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOyAvLyBtZXR0ZSBkaWRBdXRvTG9nb3V0ID0gdHJ1ZSBuZWwgaW5kZXguanMKCiAgICBjb250ZXh0LmNvbW1pdCgnc2V0QXV0b0xvZ291dCcpOwogIH0KfTs="},{"version":3,"sources":["/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js"],"names":["cred","timer","login","context","payload","url","dev","url_login","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","enctype","body","JSON","stringify","email","password","response","json","responseData","ok","code","Error","message","status","expiresIn","expirationDate","Date","getTime","localStorage","setItem","token","setTimeout","dispatch","commit","userId","register","_","console","log","name","surname","tryLogin","getItem","tokenExpiration","expiredIn","logout","removeItem","clearTimeout","autoLogOut"],"mappings":"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","sourcesContent":["import cred from '../../cred.js'\n\nlet timer\n\nexport default {\n    /**Login method\n     * \n     * @param {*} context \n     * @param {*} payload \n     */\n    async login(context, payload) {\n\n        let url = cred.dev.url_login\n\n        const response = await fetch(url, {\n            method: 'POST',\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n                'Content-Type': 'application/json',\n\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 401) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n        // qui tutto ok \n\n\n        // responseData.expiresIn = 3600 ,,, è in secondi [* 100 per ottenere millisecondi]\n        const expiresIn = +responseData.expiresIn * 1000\n            //  const expiresIn = 5000\n            // gets the time in milliseconds\n        const expirationDate = new Date().getTime() + expiresIn\n\n\n        localStorage.setItem('token', responseData.token)\n        localStorage.setItem('userId', responseData.email)\n        localStorage.setItem('tokenExpiration', expirationDate)\n\n\n        // dopo questo tempo 'expiresIn', la funzione viene eseguita\n        // Una volta logout, pulisco il timer con clearTimeout\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiresIn);\n\n\n        context.commit('setUser', {\n            token: responseData.token,\n            userId: responseData.email,\n        })\n\n\n    },\n\n\n    /**\n     * register method\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async register(_, payload) {\n        let url = 'http://localhost:3000/register'\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n                //      'Content-Type': 'application/json',\n                'Content-Type': 'application/x-www-form-urlencoded',\n\n\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n            body: JSON.stringify({\n                name: payload.name,\n                surname: payload.surname,\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 409) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n\n\n    },\n\n    /**\n     * Get calls in every page riload\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async tryLogin(context) {\n        const token = localStorage.getItem('token')\n        const userId = localStorage.getItem('userId')\n        const tokenExpiration = localStorage.getItem('tokenExpiration')\n\n        // prendo la differenza per capire se il token è scaduto\n        const expiredIn = +tokenExpiration - new Date().getTime();\n\n        if (expiredIn < 0) {\n            return\n        }\n\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiredIn)\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    /**\n     * Logs the user out\n     * @param {*} context \n     */\n    logout(context) {\n\n        localStorage.removeItem('token')\n        localStorage.removeItem('userId')\n        localStorage.removeItem('tokenExpiration')\n\n        clearTimeout(timer)\n\n        context.commit('setUser', {\n            token: null,\n            userId: null\n\n        })\n\n    },\n    autoLogOut(context) {\n        // chiama il metodo qui sopra 'logout\n        context.dispatch('logout')\n            // mette didAutoLogout = true nel index.js\n        context.commit('setAutoLogout')\n    }\n\n\n\n}"]}]}